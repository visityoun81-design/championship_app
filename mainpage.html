<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHAMPIONSHIP LOBBY</title>


    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="dog.png">
    <script>
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('sw.js');
      }

// 1ì´ˆë§ˆë‹¤ ëŒ€íšŒê°€ ì‹œì‘ë˜ì—ˆëŠ”ì§€ ì²´í¬í•˜ëŠ” ê¸°ëŠ¥
setInterval(function() {
    const isStarted = localStorage.getItem('tournamentActive');
    const eventBanner = document.getElementById('event-banner'); // ì´ë²¤íŠ¸ ë°°ë„ˆ ID

    if (isStarted === 'true') {
        // ëŒ€íšŒê°€ ì‹œì‘ë˜ì—ˆë‹¤ë©´ ë°°ë„ˆë¥¼ ë³´ì—¬ì£¼ê±°ë‚˜ ê°•ì¡° íš¨ê³¼
        if (eventBanner) {
            eventBanner.style.display = 'block';
            eventBanner.innerHTML = "ğŸ”¥ ì§€ê¸ˆì€ ëŒ€íšŒ ì‹œê°„ì…ë‹ˆë‹¤! ë†’ì€ ì ìˆ˜ì— ë„ì „í•˜ì„¸ìš”! ğŸ”¥";
            eventBanner.style.backgroundColor = "#f87171"; // ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ê°•ì¡°
        }
    } else {
        // ëŒ€íšŒê°€ ì¢…ë£Œë˜ì—ˆë‹¤ë©´ ë°°ë„ˆë¥¼ ìˆ¨ê¸°ê±°ë‚˜ í‰ì†Œ ìƒíƒœë¡œ
        if (eventBanner) {
            eventBanner.style.display = 'none';
        }
    }
}, 1000); // 1000ms = 1ì´ˆë§ˆë‹¤ í™•ì¸


    </script>



    <style>
        /* [1. ê¸°ë³¸ ë””ìì¸ ë³µêµ¬] */
        body { opacity: 0; animation: fadeInPage 0.8s forwards; margin: 0; padding: 0; background: radial-gradient(circle at top, #1e1b4b, #020617); color: white; font-family: 'Pretendard', sans-serif; padding-bottom: 40px; overflow-x: hidden; }
        @keyframes fadeInPage { from { opacity: 0; } to { opacity: 1; } }
        :root { --bg-dark: #0f172a; --card-bg: rgba(30, 41, 59, 0.8); --neon-purple: #a855f7; --gold: #fbbf24; --diamond: #22d3ee; }

        /* [2. í—¤ë” ë° ìì‚° UI] */
        .header { padding: 15px 20px; display: flex; align-items: center; justify-content: space-between; background: rgba(0, 0, 0, 0.4); backdrop-filter: blur(15px); border-bottom: 2px solid rgba(168, 85, 247, 0.3); position: sticky; top: 0; z-index: 1000; }
        .profile-btn { display: flex; align-items: center; gap: 12px; cursor: pointer; }
        .char-circle { width: 50px; height: 50px; background: linear-gradient(135deg, #a855f7, #3b82f6); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 28px; border: 2px solid white; }
        .user-text .name { font-weight: bold; font-size: 1rem; display: block; }
        
        /* [3. ì„¹ì…˜ ë° ë²„íŠ¼ ë””ìì¸] */
        .section { padding: 15px 20px 5px; }
        .section-title { font-size: 1rem; font-weight: bold; margin-bottom: 10px; display: block; color: var(--neon-purple); }
        .badge-row { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 5px; }
        .badge-slot { min-width: 55px; height: 55px; background: var(--card-bg); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; border: 1px solid rgba(255,255,255,0.1); }
        
        .content-list { padding: 0 20px; display: flex; flex-direction: column; gap: 12px; }
        .subject-row { background: var(--card-bg); border-radius: 18px; padding: 15px; display: flex; flex-direction: column; gap: 10px; border: 1px solid rgba(255,255,255,0.08); }
        .subject-header { font-weight: bold; font-size: 1rem; display: flex; align-items: center; gap: 5px; }
        .level-group { display: flex; gap: 8px; }
        .level-btn { flex: 1; padding: 12px 5px; border-radius: 10px; border: none; font-weight: bold; font-size: 0.85rem; color: white; cursor: pointer; transition: 0.2s; }
        .lv-basic { background: linear-gradient(135deg, #22c55e, #15803d); box-shadow: 0 4px 0 #052e16; }
        .lv-locked { background: #334155; box-shadow: 0 4px 0 #1e293b; opacity: 0.6; cursor: not-allowed; }
        
        .mini-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; padding: 15px 20px; }
        .mini-btn { background: #1e293b; border: 1px solid var(--neon-purple); padding: 15px 5px; border-radius: 15px; text-align: center; font-size: 0.8rem; font-weight: bold; color: white; cursor: pointer; }
        .championship-banner { background: linear-gradient(90deg, #7e22ce, #3b82f6); margin: 10px 20px; padding: 20px; border-radius: 20px; text-align: center; font-weight: 900; font-size: 1.1rem; box-shadow: 0 10px 20px rgba(126, 34, 206, 0.4); color: white; cursor: pointer; }

        /* [4. ì¹´ìš´íŠ¸ë‹¤ìš´ ë ˆì´ì–´] */
        #countdown-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(2, 6, 23, 0.98); display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 10000; backdrop-filter: blur(20px); }
        .loader-container { position: relative; width: 250px; height: 250px; display: flex; align-items: center; justify-content: center; }
        .loader-bg { position: absolute; width: 100%; height: 100%; border-radius: 50%; border: 10px solid rgba(168, 85, 247, 0.1); }
        .loader-circle { position: absolute; width: 100%; height: 100%; border-radius: 50%; border: 10px solid transparent; border-top: 10px solid #a855f7; border-right: 10px solid #a855f7; box-shadow: 0 0 25px #a855f7; transform: rotate(-45deg); display: none; }
        .loader-circle.active { display: block; animation: spinCircle 2s linear forwards; }
        @keyframes spinCircle { 0% { transform: rotate(-45deg); } 100% { transform: rotate(315deg); } }
        #countdown-text { position: absolute; font-size: 50px; font-weight: 900; color: #fff; opacity: 0.3; transition: 0.5s; z-index: 10; }
        #countdown-text.finish { opacity: 1; transform: scale(1.3); color: #fbbf24; text-shadow: 0 0 40px #fbbf24; }
        #game-start-banner { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0); width: 100%; text-align: center; font-size: 80px; font-weight: 900; color: #22d3ee; text-shadow: 0 0 50px #22d3ee; z-index: 10001; pointer-events: none; opacity: 0; font-style: italic; }
        .show-banner { animation: bannerPop 1s forwards; }
        @keyframes bannerPop { 0% { transform: translate(-50%, -50%) scale(0); opacity: 0; } 100% { transform: translate(-50%, -50%) scale(1); opacity: 1; } }

        .settings-btn { position: fixed; bottom: 20px; right: 20px; font-size: 30px; cursor: pointer; z-index: 1100; background: rgba(0,0,0,0.5); border-radius: 50%; width: 55px; height: 55px; display: flex; align-items: center; justify-content: center; border: 1px solid var(--neon-purple); }
    </style>
</head>
<body>

<div class="header">
    <div class="profile-btn" onclick="location.href='information.html'" style="display: flex; align-items: center; gap: 12px; cursor: pointer;">
        <div class="char-circle" id="lobby-char-container" style="position: relative; overflow: hidden; background: #2d2d5a; width: 50px; height: 50px; border-radius: 50%; border: 2px solid white; display: flex; align-items: center; justify-content: center;">
            <img id="l-wing" src="" style="position:absolute; width:100%; height:100%; top:50%; left:50%; transform:translate(-50%, -50%); display:none; z-index:1;">
            <img id="l-char" src="dog.png" style="position:absolute; width:80%; height:80%; top:50%; left:50%; transform:translate(-50%, -50%); z-index:2;">
            <img id="l-pet" src="" style="position:absolute; width:35%; height:35%; top:75%; left:75%; transform:translate(-50%, -50%); display:none; z-index:3;">
        </div>
        <div class="user-text">
            <span id="display-user-name" style="font-weight: bold; font-size: 1rem;">ìœ¤ì„í™” ã€‰</span>
        </div>
    </div>
    
    <div style="display: flex; align-items: center; gap: 15px; text-align: right; font-weight: bold; font-size: 0.9rem;">
        <div style="text-align: left;">
            <div id="display-gems" style="color:var(--diamond)">ğŸ’ 0</div>
            <div id="display-coins" style="color:var(--gold)">ğŸª™ 0</div>
        </div>
    </div>
</div>

<div class="section">
    <span class="section-title">ğŸ† ë‚˜ì˜ í™©ê¸ˆ ë°°ì§€ ì»¬ë ‰ì…˜</span>
    <div class="badge-row">
        <div class="badge-slot">ğŸ¥‡</div><div class="badge-slot">ğŸ”¥</div><div class="badge-slot">ğŸ“…</div><div class="badge-slot" style="opacity:0.3">â“</div><div class="badge-slot" style="opacity:0.3">â“</div>
    </div>
</div>

<div class="content-list">
    <div class="subject-row">
        <div class="subject-header">â• ë§ì…ˆ/ëº„ì…ˆ</div>
        <div class="level-group">
            <button class="level-btn lv-basic">ì´ˆê¸‰</button>
            <button class="level-btn lv-basic">ì¤‘ê¸‰ ğŸ”’</button>
            <button class="level-btn lv-basic">ë§ˆìŠ¤í„° ğŸ”’</button>
        </div>
    </div>
    <div class="subject-row">
        <div class="subject-header">âœ–ï¸ ê³±ì…ˆ ì•”ì‚°</div>
        <div class="level-group">
            <button class="level-btn lv-locked">ì´ˆê¸‰</button>
            <button class="level-btn lv-locked">ì¤‘ê¸‰ ğŸ”’</button>
            <button class="level-btn lv-locked">ë§ˆìŠ¤í„° ğŸ”’</button>
        </div>
    </div>
    <div class="subject-row">
        <div class="subject-header">â— ë‚˜ëˆ—ì…ˆ ì•”ì‚°</div>
        <div class="level-group">
            <button class="level-btn lv-locked">ì´ˆê¸‰</button>
            <button class="level-btn lv-locked">ì¤‘ê¸‰ ğŸ”’</button>
            <button class="level-btn lv-locked">ë§ˆìŠ¤í„° ğŸ”’</button>
        </div>
    </div>
</div>

<div class="mini-grid">
    <div class="mini-btn">ğŸˆ 10ë§Œë“¤ê¸°</div>
    <div class="mini-btn">ğŸ§± 24ë§Œë“¤ê¸°</div>
    <div class="mini-btn">ğŸ”¢ ìŠí…Œí‘œ</div>
</div>

<div class="championship-banner">
    ğŸ† CHAMPIONSHIP ğŸ†
    <div style="font-size: 0.7rem; font-weight: normal; margin-top: 5px;">ì‹¤ì‹œê°„ ì „êµ­ ì•”ì‚°ì±”í”¼ì–¸ì‰½ ì…ì¥</div>
</div>

<div id="countdown-overlay">
    <div class="loader-container">
        <div class="loader-bg"></div><div class="loader-circle" id="l-circle"></div><div id="countdown-text">START!</div>
    </div>
</div>
<div id="game-start-banner">GAME START!!</div>
<div class="settings-btn" onclick="handleSettingsClick()">âš™ï¸</div>

<script>
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    function playClickSound() {
        if (audioCtx.state === 'suspended') audioCtx.resume();
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.type = 'triangle'; osc.frequency.setValueAtTime(800, audioCtx.currentTime);
        gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
        osc.connect(gain); gain.connect(audioCtx.destination);
        osc.start(); osc.stop(audioCtx.currentTime + 0.1);
    }

    function playStartSignal() {
        if (audioCtx.state === 'suspended') audioCtx.resume();
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.type = 'square'; osc.frequency.setValueAtTime(440, audioCtx.currentTime);
        osc.frequency.exponentialRampToValueAtTime(880, audioCtx.currentTime + 0.1);
        gain.gain.setValueAtTime(0.15, audioCtx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 1.2);
        osc.connect(gain); gain.connect(audioCtx.destination);
        osc.start(); osc.stop(audioCtx.currentTime + 1.2);
    }

    function handleSettingsClick() {
        const role = localStorage.getItem('userRole');
        if (role === 'admin' || role === 'teacher') {
            location.href = 'admin.html';
        } else {
            alert("í•™ìƒìš© ì„¤ì • ë©”ë‰´ëŠ” ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.");
        }
    }

    function startCountdown(gameName) {
        const overlay = document.getElementById('countdown-overlay');
        const circle = document.getElementById('l-circle');
        const text = document.getElementById('countdown-text');
        const banner = document.getElementById('game-start-banner');

        overlay.style.display = 'flex';
        circle.classList.remove('active');
        text.classList.remove('finish');
        text.style.display = 'block'; 
        text.style.opacity = "0.3";
        banner.classList.remove('show-banner');

        void circle.offsetWidth; 
        circle.classList.add('active');
        playClickSound(); 

        setTimeout(() => {
            text.classList.add('finish');
            playClickSound(); 
        }, 2000);

        setTimeout(() => {
            text.style.display = 'none'; 
            banner.classList.add('show-banner'); 
            playStartSignal(); 

setTimeout(() => {
    if (gameName.includes("ì´ˆê¸‰")) {
        location.href = 'add_base.html';
    } else if (gameName.includes("ì¤‘ê¸‰")) {
        location.href = 'add_medium.html';
    } else if (gameName.includes("ë§ˆìŠ¤í„°")) {
        location.href = 'add_master.html';
    } else if (gameName.includes("CHAMPIONSHIP") || gameName.includes("ì‹¤ì‹œê°„")) {
        // CHAMPIONSHIP ë°°ë„ˆ í´ë¦­ ì‹œ ì•”ì‚°ì±”í”¼ì–¸.htmlë¡œ ì´ë™
        location.href = 'championship.html';
    } else {
        overlay.style.display = 'none';
        banner.classList.remove('show-banner');
        alert("'" + gameName + "' ê³¼ëª©ì€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤!");
    }
}, 1200); 
        }, 2500);
    }

window.addEventListener('load', function() {
    const userName = localStorage.getItem('userName') || "ìœ¤ì„í™”";
    const gems = localStorage.getItem('userGems') || "0";
    const coins = localStorage.getItem('userCoins') || "0";

    document.getElementById('display-user-name').innerText = userName + " ã€‰";
    document.getElementById('display-gems').innerText = `ğŸ’ ${gems}`;
    document.getElementById('display-coins').innerText = `ğŸª™ ${coins}`;

    const savedChar = localStorage.getItem('myChar') || "dog.png";
    const savedWing = localStorage.getItem('myWing'); 
    const savedPet = localStorage.getItem('myPet');

    document.getElementById('l-char').src = savedChar;

    if (savedWing && savedWing !== "") {
        const wingImg = document.getElementById('l-wing');
        wingImg.src = savedWing;
        wingImg.style.display = 'block';
    }

    if (savedPet && savedPet !== "") {
        const petImg = document.getElementById('l-pet');
        petImg.src = savedPet;
        petImg.style.display = 'block';
    }

    document.querySelectorAll('.level-btn.lv-basic, .mini-btn, .championship-banner').forEach(btn => {
        btn.onclick = function() {
            const title = this.innerText.split('\n')[0].trim();
            startCountdown(title);
        };
    });
});
</script>
</body>
</html>
